[tool:pytest]
# Pytest configuration for F1 Analytics Airflow DAGs

# Test discovery
testpaths = tests
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Test output and reporting
addopts =
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    --color=yes
    --durations=10

# Minimum version requirement
minversion = 6.0

# Test markers
markers =
    unit: Unit tests that don't require external dependencies
    integration: Integration tests that may require database or external services
    slow: Slow-running tests (> 5 seconds)
    dag_validation: Tests that validate DAG structure and configuration

# Coverage configuration (if pytest-cov is installed)
# addopts = --cov=dags --cov=plugins --cov-report=html --cov-report=term-missing

# Filter warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning
    ignore::UserWarning

# Logging configuration for tests
log_cli = false
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(name)s: %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Environment variables for tests
env =
    F1_DB_HOST = localhost
    F1_DB_PORT = 5432
    F1_DB_NAME = f1_analytics_test
    F1_DB_USER = test_user
    F1_DB_PASSWORD = test_password
    F1_ERGAST_BASE_URL = https://ergast.com/api/f1
    F1_ENVIRONMENT = testing