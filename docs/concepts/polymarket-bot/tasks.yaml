GeneratedAt: "2026-02-17T13:33:42Z"
Plan: polymarket-bot-plan
Sprints:
- Features:
  - FeatureID: polymarket-bot-feat-market-data
    FeatureTitle: Market Data Integration
    Tasks:
    - AcceptanceCriteria:
      - BinanceClient successfully streams BTC/USDT prices via WebSocket
      - RSI and MACD indicators calculate correctly with configurable periods
      - WebSocket reconnection logic handles network failures gracefully
      - Order book imbalance metric computed from bid/ask depth data
      AgentType: backend-engineer
      Dependencies: []
      Description: Create the BinanceClient class with WebSocket connection management
        for BTC/USDT price streaming. Implement technical indicator calculations for
        RSI and MACD using the TA-Lib library or pure Python. Include connection retry
        logic and graceful error handling for WebSocket disconnections.
      EstimatedEffort: M
      Files:
      - polymarket-bot/market_data.py
      ID: task-polymarket-bot-feat-market-data-1
      Title: Implement Binance WebSocket client and technical indicators
    - AcceptanceCriteria:
      - PolymarketClient discovers active BTC prediction markets
      - Current odds retrieved accurately for target markets
      - API rate limiting handled with exponential backoff
      - Market data transformed into standardized MarketData objects
      AgentType: backend-engineer
      Dependencies: []
      Description: Create the PolymarketClient class for market discovery and odds
        retrieval. Implement methods to fetch active BTC-related markets, retrieve
        current odds for Yes/No positions, and handle API rate limiting. Include data
        transformation logic to normalize Polymarket responses into internal MarketData
        models.
      EstimatedEffort: M
      Files:
      - polymarket-bot/market_data.py
      ID: task-polymarket-bot-feat-market-data-2
      Title: Implement Polymarket API integration
    - AcceptanceCriteria:
      - MarketDataService provides unified interface for BTC price and market odds
      - Both Binance and Polymarket data integrated into single MarketData response
      - Service validates data freshness and quality before returning
      - Health check method confirms both upstream sources are healthy
      AgentType: backend-engineer
      Dependencies:
      - task-polymarket-bot-feat-market-data-1
      - task-polymarket-bot-feat-market-data-2
      Description: Implement the MarketDataService class that combines Binance and
        Polymarket data streams. Create the unified interface called by main.py orchestrator
        to fetch combined market signals. Add data validation, error aggregation from
        both sources, and health check logic to verify both data feeds are operational.
      EstimatedEffort: S
      Files:
      - polymarket-bot/market_data.py
      ID: task-polymarket-bot-feat-market-data-3
      Title: Integrate market data service with orchestrator
  - FeatureID: polymarket-bot-feat-state-persistence
    FeatureTitle: State Persistence and Logging
    Tasks:
    - AcceptanceCriteria:
      - bot_state.json is atomically written with current positions, balance, and
        metrics
      - trades.log appends trade records with timestamps and maintains audit trail
      - State recovery works correctly after simulated crash (temp file cleanup)
      - File rotation prevents unbounded log growth
      AgentType: backend-engineer
      Dependencies: []
      Description: Create the complete state.py module with JSON-based state management
        (bot_state.json), trade logging (trades.log), and metrics tracking. Implement
        atomic writes using temporary files for crash recovery, file rotation for
        logs, and ensure all state mutations are persisted safely. Include helper
        functions for loading/saving state and trade history.
      EstimatedEffort: M
      Files:
      - polymarket-bot/state.py
      ID: task-polymarket-bot-feat-state-persistence-1
      Title: Implement state persistence and logging system
  Sprint: 2
- Features:
  - FeatureID: polymarket-bot-feat-prediction-engine
    FeatureTitle: Prediction Engine
    Tasks:
    - AcceptanceCriteria:
      - RSI, MACD, and order book imbalance calculations work correctly
      - Signal generation produces UP/DOWN/SKIP predictions with confidence scores
        (0-100)
      - Unit tests validate indicator calculations and signal logic with known inputs
      - Prediction engine integrates with market data from market_data.py
      AgentType: backend-engineer
      Dependencies: []
      Description: Implement the complete prediction engine in prediction.py with
        RSI, MACD, and order book imbalance indicators. Include signal generation
        logic that produces UP/DOWN/SKIP predictions with confidence scores based
        on the deterministic rule-based system. Add unit tests for each indicator
        calculation and signal generation logic.
      EstimatedEffort: M
      Files:
      - polymarket-bot/prediction.py
      ID: task-polymarket-bot-feat-prediction-engine-1
      Title: Implement prediction engine with RSI/MACD signals
  - FeatureID: polymarket-bot-feat-risk-controls
    FeatureTitle: Risk Management System
    Tasks:
    - AcceptanceCriteria:
      - Max drawdown check correctly blocks trades when threshold exceeds 30%
      - Volatility circuit breaker triggers when 5-minute price range exceeds 3%
      - Trade approval logic returns clear pass/fail decisions with rejection reasons
      - Risk validation integrates with BotState for historical context
      AgentType: backend-engineer
      Dependencies: []
      Description: Create the risk.py module implementing pre-trade validation with
        max drawdown monitoring (30% threshold), volatility circuit breaker (3% 5-min
        price range check), and trade approval logic. Include retry logic for validation
        failures and integration with BotState from models.py.
      EstimatedEffort: M
      Files:
      - polymarket-bot/risk.py
      ID: task-polymarket-bot-feat-risk-controls-1
      Title: Implement risk management validation logic
  - FeatureID: polymarket-bot-feat-capital-allocation
    FeatureTitle: Win-Streak Capital Allocator
    Tasks:
    - AcceptanceCriteria:
      - calculate_position_size() returns $5 base size for first trade or after loss
      - Position size scales by 1.5x per consecutive win, capped at $25
      - Win streak counter increments on profitable trades and resets to 0 on losses
      - Function integrates with BotState.win_streak field for state persistence
      AgentType: backend-engineer
      Dependencies: []
      Description: Create the capital.py module implementing position sizing with
        base size $5, win-streak multiplier 1.5x, and $25 cap. Include streak tracking
        that increments on wins and resets on losses. Integrate with BotState from
        models.py for persistence.
      EstimatedEffort: S
      Files:
      - polymarket-bot/capital.py
      ID: task-polymarket-bot-feat-capital-allocation-1
      Title: Implement win-streak capital allocation logic
  Sprint: 3
